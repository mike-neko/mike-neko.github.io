<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="google-site-verification" content="TE7Itl6qCgv2E7jeWyM_y19ArwRppMuK9GLXHMQ4qgA" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Perfect 導入編 &middot; M.Ike</title>

  
  <link rel="stylesheet" href="https://mike-neko.github.io/css/poole.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/highlight/xcode.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link href="https://mike-neko.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
</head>
<body class="theme-base-0d layout-reverse">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>M.Ike</h1>
      <p class="lead">〜小ネタ集〜</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://mike-neko.github.io/">Top</a></li>

      <li>
        
          &nbsp;<a href="/categories/code">code&nbsp;(26)</a>&nbsp;
        
          &nbsp;<a href="/categories/docker">docker&nbsp;(3)</a>&nbsp;
        
          &nbsp;<a href="/categories/github">github&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/categories/gpgpu">gpgpu&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/categories/ios">ios&nbsp;(29)</a>&nbsp;
        
          &nbsp;<a href="/categories/memo">memo&nbsp;(27)</a>&nbsp;
        
          &nbsp;<a href="/categories/metal">metal&nbsp;(6)</a>&nbsp;
        
          &nbsp;<a href="/categories/perfect">perfect&nbsp;(3)</a>&nbsp;
        
          &nbsp;<a href="/categories/server">server&nbsp;(22)</a>&nbsp;
        
          &nbsp;<a href="/categories/swift">swift&nbsp;(1)</a>&nbsp;
        
          &nbsp;<a href="/categories/swift3">swift3&nbsp;(2)</a>&nbsp;
        
          &nbsp;<a href="/categories/unity">unity&nbsp;(2)</a>&nbsp;
        
      </li>
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/mike-neko"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      
      
      
      <a href="https://twitter.com/m__ike_"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="https://www.instagram.com/m_ike__/"><i class="fa fa-instagram fa-3x"></i></a>
      
      </li>
    </ul>


    <p>Copyright &copy; 2016
      <a href="https://twitter.com/m__ike_">M.Ike</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>Perfect 導入編</h1>
    <span class="post-date">Apr 8, 2016 
    
    <br/>
    <a class="label" href="https://mike-neko.github.io/categories/perfect">perfect</a><a class="label" href="https://mike-neko.github.io/categories/server">server</a>
    </span>
    

<h2 id="概要">概要</h2>

<p>サーバーサイドSwiftフレームワークの<a href="https://perfect.org/">Perfect</a>の使い方のメモその1</p>

<p>導入編ではベースとなるプロジェクトを一から作るあたりまで</p>

<h2 id="きっかけ">きっかけ</h2>

<p>Perfectがついに1.0になったというのを聞きつけてGitHubのREADMEを見てると、、、</p>

<blockquote>
<p><strong>WebSockets &amp; iOS Push Notifications</strong></p>

<p>Perfect now includes a <strong>WebSockets</strong> server and support for handling your own server-side <strong>iOS push notifications</strong>.</p>
</blockquote>

<p>ってのを発見！</p>

<p>ちょうど、Push通知周りの実験をしたかったこともあり、さっそく手を出すことに〜</p>

<h2 id="手順">手順</h2>

<h3 id="下準備">下準備</h3>

<h4 id="github-https-github-com-perfectlysoft-perfect-からperfectをダウンロードする"><a href="https://github.com/PerfectlySoft/Perfect">GitHub</a>からPerfectをダウンロードする</h4>

<p>ダウンロードしたら適当な場所に展開しておく</p>

<h4 id="xcodeにテンプレートを追加">Xcodeにテンプレートを追加</h4>

<ol>
<li><code>~/Library/Developer/Xcode</code>をFinderで開く</li>
<li><code>Xcode</code>直下に(無ければ)<code>Templates</code>というフォルダを作成</li>
<li>その<code>Templates</code>直下に(無ければ)<code>Project Template</code>というフォルダを作成</li>
<li>ダウンロードしておいたPerfectのプロジェクトの中（<code>Perfect-master/Extras/Xcode Templates/Perfect/</code>）にある<code>Perfect Server Framework.xctemplate</code>のフォルダを丸ごとコピー</li>
<li>3で作ったフォルダに4のフォルダを貼り付け</li>
</ol>

<h3 id="プロジェクトの作成">プロジェクトの作成</h3>

<p><em>ワークスペース名：<code>SmapleBasePerfect</code><br />
 プロジェクト名：<code>SampleServer</code></em><br />
で作成する前提での手順</p>

<h4 id="ワークスペースの作成">ワークスペースの作成</h4>

<ol>
<li>Xcodeのメニューの<code>File</code>-<code>New</code>-<code>Workspace...</code>を選択</li>
<li>ワークスペース名と保存先のフォルダを選択(作成)して<code>Save</code><br />
（ワークスペースはプロジェクトと違ってフォルダは自動作成されないので注意）</li>
</ol>

<p>自動で空のワークスペースの画面が開かれるので、そのままの状態で次の手順へ</p>

<h4 id="プロジェクトの作成-1">プロジェクトの作成</h4>

<ol>
<li>Xcodeのメニューの<code>File</code>-<code>New</code>-<code>Project...</code>を選択</li>
<li>左側の<code>OS X</code>-<code>Project Template</code>の中から<code>Perfect Server Framework</code>を選択して<code>Next</code>（下図）
<figure>
	<img src="/media/2016-04-08-perfect-1/template.png" />
</figure>
</li>
<li>プロジェクト名などを適宜入力して<code>Next</code><br />
（プロジェクト名はワークスペースと同じにできない）</li>
<li><code>Add to:</code>でワークスペース名を選択する<br /></li>
<li>保存先を選択して<code>Create</code></li>
</ol>

<p>デフォルトで下のようなプロジェクトが生成される
<figure>
	<img src="/media/2016-04-08-perfect-1/project.png" />
</figure>
</p>

<h4 id="perfectを追加">Perfectを追加</h4>

<ol>
<li>ダウンロードしておいたPerfectのプロジェクト直下にある<code>PerfectLib</code>と<code>PerfectServer</code>のフォルダを丸ごとコピー</li>
<li>プロジェクトのフォルダと同じ階層に貼り付け</li>
<li>XcodeのProject Navigator(上のイメージの部分)の何もないところで右クリック</li>
<li>出てきたメニューから<code>Add files to &quot;ワークスペース名&quot;...</code>を選択<br />
（もしプロジェクト名が出てきたら3からやり直し）</li>
<li><code>Copy items into ...</code>はチェック無、<code>Create groups ...</code>にチェック有にする<br />
（無い場合は<code>Option</code>をクリック）</li>
<li>1と2でコピーしたフォルダの中から<code>PerfectLib.xcodeproj</code>を選択して<code>Add</code><br /></li>
<li><code>PerfectServer.xcodeproj</code>についても3からの同じ手順で追加</li>
</ol>

<h4 id="スキームの設定">スキームの設定</h4>

<ol>
<li>Xcodeのメニューの<code>Product</code>-<code>Scheme</code>-<code>Manage Schemes...</code>を選択</li>
<li>プロジェクト名と同じスキームを選択して<code>Edit...</code>を選択</li>
<li>左側で<code>Run</code>、右側の<code>Info</code>タグを選択</li>
<li><code>Executable</code>で<code>PerfectServer HTTP.app</code>を選択</li>
<li>下の方にある<code>Shared</code>にチェック</li>
<li><code>Close</code>で閉じる</li>
</ol>

<h4 id="フレームワークの追加">フレームワークの追加</h4>

<ol>
<li>作成したプロジェクトを選択</li>
<li><code>TARGETS</code>でプロジェクト名と同じもの、<code>General</code>タブを選択</li>
<li><code>Linked Frameworks and Libraries</code>の<code>＋</code>を選択</li>
<li><code>PerfectLib.framework</code>で<code>OSX</code>の方を選択して<code>Add</code>
<figure>
	<img src="/media/2016-04-08-perfect-1/framework.png" />
</figure>
</li>
</ol>

<h4 id="ドキュメントを配置">ドキュメントを配置</h4>

<ol>
<li><code>Build Phases</code>タブを選択</li>
<li>左上の<code>＋</code>をクリックして、<code>New Copy Files Phases</code>を選択</li>
<li><code>Destination</code>で<code>Products Directory</code>を選択<br />
<code>Subpath</code>に<code>webroot</code>と入力</li>
<li><code>Name</code>の下の方にある<code>＋</code>をクリックし、<code>index.mustache</code>を選択して<code>Add</code><br /></li>
</ol>

<h2 id="動作確認">動作確認</h2>

<p>Xcodeで<code>SampleServer</code>のスキームで<code>Run</code>して、GUIが立ち上がるとサーバが動作した状態となる。</p>

<p>その状態で<code>http://0.0.0.0:8181/</code>にアクセスして、「Hello, world!」と出ればひとまずOK。</p>

<h1 id="感想">感想</h1>

<p>意外に日本語の、特にMac上で動かす場合の資料が少なくて苦労した。<br />
それとこういうのを触る度にサーバ周りの知識が足りないのを痛感する・・・</p>

<h1 id="参考リンク">参考リンク</h1>

<ul>
<li><a href="http://code-me-dirty.blogspot.jp/2016/02/creating-perfect-swift-server.html">Create a Perfect Swift Server Project(from scratch) in Xcode</a></li>
</ul>

<h1 id="開発環境">開発環境</h1>

<ul>
<li>OS X 10.11.4</li>
<li>Xcode 7.3</li>
</ul>

<h1 id="ソース">ソース</h1>

<p><a href="https://github.com/mike-neko/SampleBasePerfect">こちら</a></p>

<ul>
<li>Perfect 基礎編<a href="../perfect-2/">その2</a></li>
<li>Perfect APNs編<a href="../perfect-push/">その3</a></li>
</ul>

  </div>
  
</div>




<script src="https://mike-neko.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var _gaq=[['_setAccount','UA-83211342-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

