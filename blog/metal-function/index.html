<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="google-site-verification" content="TE7Itl6qCgv2E7jeWyM_y19ArwRppMuK9GLXHMQ4qgA" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Metal組み込み関数 &middot; M.Ike</title>

  
  <link rel="stylesheet" href="https://mike-neko.github.io/css/poole.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://mike-neko.github.io/css/highlight/xcode.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link href="https://mike-neko.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
</head>
<body class="theme-base-0d layout-reverse">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>M.Ike</h1>
      <p class="lead">〜小ネタ集〜</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://mike-neko.github.io/">Top</a></li>

      
        <li class="sidebar-nav-item">
            <a href="/categories/ios">ios&nbsp;(29)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/mac">mac&nbsp;(11)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/old">old&nbsp;(14)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/others">others&nbsp;(2)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/server">server&nbsp;(17)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/unity">unity&nbsp;(2)</a>
        </li>
      
        <li class="sidebar-nav-item">
            <a href="/categories/web">web&nbsp;(3)</a>
        </li>
      

      <li class="sidebar-nav-item lead">Tags</li>

      <li>
        
          &nbsp;<a href="/tags/apns">apns&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/tags/arkit">arkit&nbsp;(3)</a>&nbsp;
        
          &nbsp;<a href="/tags/centos">centos&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/tags/db">db&nbsp;(11)</a>&nbsp;
        
          &nbsp;<a href="/tags/docker">docker&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/tags/github">github&nbsp;(5)</a>&nbsp;
        
          &nbsp;<a href="/tags/gpgpu">gpgpu&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/tags/http2">http2&nbsp;(4)</a>&nbsp;
        
          &nbsp;<a href="/tags/hugo">hugo&nbsp;(2)</a>&nbsp;
        
          &nbsp;<a href="/tags/metal">metal&nbsp;(10)</a>&nbsp;
        
          &nbsp;<a href="/tags/nginx">nginx&nbsp;(2)</a>&nbsp;
        
          &nbsp;<a href="/tags/objc">objc&nbsp;(2)</a>&nbsp;
        
          &nbsp;<a href="/tags/opencv">opencv&nbsp;(1)</a>&nbsp;
        
          &nbsp;<a href="/tags/php">php&nbsp;(12)</a>&nbsp;
        
          &nbsp;<a href="/tags/python">python&nbsp;(1)</a>&nbsp;
        
          &nbsp;<a href="/tags/ssl">ssl&nbsp;(3)</a>&nbsp;
        
          &nbsp;<a href="/tags/swift2">swift2&nbsp;(13)</a>&nbsp;
        
          &nbsp;<a href="/tags/swift3">swift3&nbsp;(20)</a>&nbsp;
        
          &nbsp;<a href="/tags/webrtc">webrtc&nbsp;(2)</a>&nbsp;
        
      </li>
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/mike-neko"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      
      
      
      <a href="https://twitter.com/m__ike_"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="https://www.instagram.com/m_ike__/"><i class="fa fa-instagram fa-3x"></i></a>
      
      </li>
    </ul>


    <p>Copyright &copy; 2017
      <a href="https://twitter.com/m__ike_">M.Ike</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>Metal組み込み関数</h1>
    <span class="post-date">Jan 28, 2016 
    
    &middot; <a href="https://mike-neko.github.io/categories/old">old</a> 
    
    
    <br/>
    <a class="label" href="https://mike-neko.github.io/tags/metal">metal</a><a class="label" href="https://mike-neko.github.io/tags/gpgpu">gpgpu</a>
    </span>
    <h2 id="metalのシェーダで利用できる関数のまとめ">Metalのシェーダで利用できる関数のまとめ</h2>

<h4 id="hlsl-glslは各言語との対比">HLSL/GLSLは各言語との対比</h4>

<ul>
<li>(空白) : 同じ</li>
<li>ー : 該当なし</li>
<li>△ : 同等の関数があるが詳細が異なる</li>
<li>(関数名) : 挙動は同じだが、名前が別の関数がある</li>
</ul>

<p></p>

<h2 id="共通関数">共通関数</h2>

<ul>
<li>T は浮動小数点数のスカラーかベクター</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>T clamp(T x, T min, T max)</td>
<td>x を [min, max] の範囲にクランプする<br>fmin(fmax(x, min), max) を返す<br>min &gt; maxは<strong>不定</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T mix(T x, T y, T a)</td>
<td>[x, y] の間の a で線形補間<br>x + (y – x) * a を返す<br>a は 0.0 から 1.0。それ以外は<strong>不定</strong></td>
<td align="center">lerp</td>
<td align="center"></td>
</tr>

<tr>
<td>T saturate(T x)</td>
<td>x を [0.0, 1.0] の範囲にクランプして返す</td>
<td align="center"></td>
<td align="center">ー</td>
</tr>

<tr>
<td>T sign(T x)</td>
<td>x &gt; 0 で 1.0, x &lt; 0 で -1.0,<br>x = -0.0 で -0.0, x = +0.0 で +0.0,<br>x = NaN で 0.0 を返す</td>
<td align="center">△</td>
<td align="center">△</td>
</tr>

<tr>
<td>T smoothstep(T e0, T e1, T x)</td>
<td>x &lt;= e0 で 0.0, x &gt;= e1 で 1.0<BR>それ以外は [0.0, 1.0] の範囲でエルミート補間した値を返す<br>スムーズなトランジションに便利<br>t = clamp((x – e0)/(e1 – e0), 0, 1);<br>return t * t * (3 – 2 * t);と等価<br>e0 &gt;= e1 または<br> x, e0, e1 のいずれかが NaN は<strong>不定</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T step(T edge, T x)</td>
<td>x &lt; edge で 0.0<br>それ以外は 1.0 を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="整数関数">整数関数</h2>

<ul>
<li>T は整数のスカラーかベクター</li>
<li>Tu は符号なし整数のスカラーかベクター</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>T abs(T x)<br>T fabs(T x)</td>
<td>x の絶対値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Tu absdiff(T x, T y)</td>
<td>オーバーフローなしで x - y の絶対値を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T clz(T x)</td>
<td>x の先頭ビットから連続する 0 の個数<br>x = 0 で x の型のビットのサイズを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T ctz(T x)</td>
<td>x の末尾ビットから連続する 0 の個数<br>x = 0 で x の型のビットのサイズを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T hadd(T x, T y)</td>
<td>(x + y) &gt;&gt; 1 を返す<br>中間合計はオーバーフローしない</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T madhi(T a, T b, T c)</td>
<td>mulhi(a, b) + c を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T madsat(T a, T b, T c)</td>
<td>saturate(a * b + c) を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T max(T x, T y)</td>
<td>x と y の最大値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T min(T x, T x)</td>
<td>x と y の最小値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T mulhi(T x, T y)</td>
<td>x * y の結果の上位半分のビットを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T popcount(T x)</td>
<td>x の 0 ではないビットの数を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T rhadd(T x, T y)</td>
<td>(x + y + 1) &gt;&gt; 1 を返す<br>中間合計はオーバーフローしない</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T rotate(T v, T i)</td>
<td>v の各要素に対し対応する i の要素の値のビット数分左へシフトした値を返す<br>あふれたビットは右端から挿入される</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T subsat(T x, T y)</td>
<td>saturate(x - y) を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>
</tbody>
</table>

<h2 id="関係関数">関係関数</h2>

<ul>
<li>T は浮動小数点数のスカラーかベクター</li>
<li>Ti は整数かブーリアン型のスカラーかベクター</li>
<li>Tb はブーリアン型のスカラーかベクター</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>bool all(Tb x)</td>
<td>x の全ての要素が true の時に true を返す</td>
<td align="center">△</td>
<td align="center"></td>
</tr>

<tr>
<td>bool any(Tb x)</td>
<td>x のいずれかの要素が true の時に true を返す</td>
<td align="center">△</td>
<td align="center"></td>
</tr>

<tr>
<td>Tb isfinite(T x)</td>
<td>x が有限の場合は true を返す</td>
<td align="center"></td>
<td align="center">ー</td>
</tr>

<tr>
<td>Tb isinf(T x)</td>
<td>x が無限大(+/-)であれば true を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Tb isnan(T x)</td>
<td>x がNanであれば true を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Tb isnormal(T x)</td>
<td>x が正規化数であれば true を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>Tb isordered(T x, T y)</td>
<td>x と y の引数が順序付けられているか<br>(x == x) &amp;&amp; (y == y) を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>Tb isunordered(T x, T y)</td>
<td>x と y の引数が順序付けられていないか<br>x か y が NaN であれば true を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T select(T a, T b, Tb c)</td>
<td>result[i] = c[i] ? b[i] : a[i] を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>Ti select(Ti a, Ti b, Tb c)</td>
<td>result = c ? b : a　を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>Tb signbit(T x)</td>
<td>符号ビットをテストする<br>x に浮動小数点数がセットされている場合は true</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>
</tbody>
</table>

<h2 id="数学関数">数学関数</h2>

<ul>
<li>T は浮動小数点数のスカラーかベクター</li>
<li>Ti は整数のスカラーかベクター</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>T acos(T x)</td>
<td>x のアークコサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T acosh(T x)</td>
<td>x のハイパボリックアークコサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T asin(T x)</td>
<td>x のアークサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T asinh(T x)</td>
<td>x のハイパボリックアークサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T atan(T x)</td>
<td>x のアークタンジェントを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T atan2(T y, T x)</td>
<td>y と x のアークタンジェントを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T atanh(T x)</td>
<td>x のハイパボリックアークタンジェントを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T ceil(T x)</td>
<td>x を正の無限大に近いほうの整数に丸めた値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T copysign(T x, T y)</td>
<td>y の符号に変えた x を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T cos(T x)</td>
<td>x のコサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T cosh(T x)</td>
<td>x のハイパボリックコサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T cospi(T x)</td>
<td>pi * x のコサインを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T exp(T x)</td>
<td>e ^ x を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T exp2(T x)</td>
<td>2 ^ x を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T exp10(T x)</td>
<td>10 ^ x を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T fdim(T x, T y)</td>
<td>x &gt; y で x - y,<br>x &lt;= y で +0 を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T floor(T x)</td>
<td>x を負の無限大に近いほうの整数に丸めた値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T fma(T a, T b, T c)</td>
<td>a * b + c を返す<br>融合積和演算(IEEE 754-2008準拠)</td>
<td align="center">ー</td>
<td align="center"></td>
</tr>

<tr>
<td>T fmod(T x, T y)</td>
<td>x - y * trunc(x / y) を返す</td>
<td align="center"></td>
<td align="center">ー</td>
</tr>

<tr>
<td>T fract(T x)</td>
<td>x の小数部を返す</td>
<td align="center">frac</td>
<td align="center"></td>
</tr>

<tr>
<td>T frexp(T x, Ti &amp;exp)</td>
<td>x = [返り値] * 2 ^ exp となる<br>返り値は[<sup>1</sup>&frasl;<sub>2</sub>, 1]の範囲か 0 となる</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Ti ilogb(T x)</td>
<td>x の指数を整数で返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T ldexp(T x, Ti k)</td>
<td>x * 2 ^ k を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T log(T x)</td>
<td>x の自然対数を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T log2(T x)</td>
<td>x の 2 を底とする対数を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T log10(T x)</td>
<td>x の 10 を底とする対数を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T fmax(T x, T y)</td>
<td>x と y の最大値を返す<br>片方の引数が NaN なら NaN では無い方の値を返す<br>両方が NaN なら NaN を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T fmin(T x, T y)</td>
<td>x と y の最小値を返す<br>片方の引数が NaN なら NaN では無い方の値を返す<br>両方が NaN なら NaN を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T modf(T x, T &amp;intval)</td>
<td>x を同じ符号を持つ整数部と少数部に分ける<br>少数部を返り値で、整数部を intval で返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T pow(T x, T y)</td>
<td>x ^ y を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T powr(T x, T y)</td>
<td>x &gt;= 0 の x ^ y を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T rint(T x)</td>
<td>x を最近接偶数へ丸めた整数値を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T round(T x)</td>
<td>x を直近の整数値に丸めて返す<br>半分の場合は 0 に近い方となる</td>
<td align="center">△</td>
<td align="center">△</td>
</tr>

<tr>
<td>T rsqrt(T x)</td>
<td>x の平方根の逆数を返す</td>
<td align="center"></td>
<td align="center">ー</td>
</tr>

<tr>
<td>T sin(T x)</td>
<td>x のサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T sincos(T x, T &amp;cosval)</td>
<td>x のサインとコサインを計算する<br>サインを返り値で、コサインを cosval で返す</td>
<td align="center"></td>
<td align="center">ー</td>
</tr>

<tr>
<td>T sinh(T x)</td>
<td>x のハイパボリックサインを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T sinpi(T x)</td>
<td>pi * x のサインを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T sqrt(T x)</td>
<td>x の平方根を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T tan(T x)</td>
<td>x のタンジェントを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T tanh(T x)</td>
<td>x のハイパボリックタンジェントを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T tanpi(T x)</td>
<td>pi * x のタンジェントを返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T trunc(T x)</td>
<td>x を 0 に近い方向へ丸めた値を返す</td>
<td align="center">ー</td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="行列関数">行列関数</h2>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>float determinant(floatnxn)<br>half determinant(halfnxn)</td>
<td>行列式を返す<br>行列は正方行列でなければならない</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>floatmxn transpose(floatnxm)<br>halfmxn transpose(halfnxm)</td>
<td>転置行列を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="幾何関数">幾何関数</h2>

<ul>
<li>T は浮動小数点数(floatn / halfn)のベクター</li>
<li>Ts はベクターに対応するスカラー</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>T cross(T x, T y)</td>
<td>x と y の外積を返す<br>T は3次元ベクトルでなければならない</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Ts distance(T x, T y)</td>
<td>x と y の距離を求める<br>length(x - y) を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Ts distance_squared(T x, T y)</td>
<td>x と y の距離の平方を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>Ts dot(T x, T y)</td>
<td>x と y の内積を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T faceforward(T N, T I, T Nref)</td>
<td>dot(Nref, I) &lt; 0.0 で N<br>それ以外は -N を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Ts length(T x)</td>
<td>x のベクトルの長さを返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>Ts length_squared(T x)</td>
<td>x のベクトルの長さの平方を返す</td>
<td align="center">ー</td>
<td align="center">ー</td>
</tr>

<tr>
<td>T normalize(T x)</td>
<td>x の正規化した値を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T reflect(T I, T N)</td>
<td>入射ベクトル I と面の法線ベクトル N から、反射ベクトル I – 2 * dot(N, I) * N を返す<br>N は正規されていなければならない</td>
<td align="center"></td>
<td align="center"></td>
</tr>

<tr>
<td>T refract(T I, T N, Ts eta)</td>
<td>入射ベクトル I と面の法線ベクトル N と屈折率 eta から、屈折ベクトルを返す<br>I と N  は正規されていなければならない</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="グラフィック関数">グラフィック関数</h2>

<h3 id="フラグメントシェーダ">フラグメントシェーダ</h3>

<ul>
<li>T はfloat, float2, float3, float4, half, half2, half3, half4</li>
</ul>

<table>
<thead>
<tr>
<th>Metal</th>
<th></th>
<th align="center">HLSL</th>
<th align="center">GLSL</th>
</tr>
</thead>

<tbody>
<tr>
<td>T dfdx(T p)</td>
<td>スクリーン空間の指定された x 座標に対する高精度の偏微分を返す</td>
<td align="center">ddx</td>
<td align="center">dFdxFine</td>
</tr>

<tr>
<td>T dfdy(T p)</td>
<td>スクリーン空間の指定された y 座標に対する高精度の偏微分を返す</td>
<td align="center">ddy</td>
<td align="center">dFdyFine</td>
</tr>

<tr>
<td>T fwidth(T p)</td>
<td>fabs(dfdx(p)) + fabs(dfdy(p)) を返す</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="感想">感想</h2>

<p>さすが後発なだけあって、全部入り。GLSLをベースにHLSLやらOpenCLからありったけ詰め込んだような感じ。</p>

<h1 id="参考リンク">参考リンク</h1>

<ul>
<li>公式：<a href="https://developer.apple.com/library/ios/documentation/Metal/Reference/MetalShadingLanguageGuide/std-lib/std-lib.html">Metal Standard Library</a></li>
<li>OpenGL4.5：<a href="https://www.opengl.org/sdk/docs/reference_card/opengl45-reference-card.pdf">API Reference Card</a></li>
<li>DirectX：<a href="https://msdn.microsoft.com/ja-jp/library/bb509611.aspx">組み込み関数 (DirectX HLSL)</a></li>
</ul>
  </div>
  
</div>




<script src="https://mike-neko.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var _gaq=[['_setAccount','UA-83211342-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

