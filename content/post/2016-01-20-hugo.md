+++
categories = ["web"]
tags = ["hugo", "github"]
date = "2016-01-20T22:48:33+09:00"
description = ""
draft = false
slug = "hugo-memo"
title = "Hugo利用方法メモ"

+++

このブログは[Hugo](https://gohugo.io/)+`GitHub Pages`で公開しているがそれにあたってのメモ
<!--more-->

初めはOctopressを使ってたものの、シンタックスハイライトがどうもうまく好みにならなかったので、結局、１週間ほどでHugoに乗り換え。
Octopressに比べると構成もわかりやすいし、最新の資料が多くてよかった。  
テーマはなるべくシンプル、かつ、スマホでも見やすい[Hyde-X](http://themes.gohugo.io/hyde-x/)を選定。
以下はHyde-Xの場合の設定なので、他のテーマでは変わることがあるので注意


## 初期設定
### ローカルにディレクトリ作成  
1. `hugo new site <site-name>`で作業用のローカルディレクトリを作成
2. 公開用ディレクトリを作成してGitを設定

    ```
    cd <site-name>
    mkdir public
    git remote add origin https://github.com/<github name>/<github name>.github.io.git
    ```
3. `.gitignore`をhttps://github.com/github/gitignore から落としてきて、2の`public`の中に置く

### 記事のテンプレを作成  
`<site-name>/archetypes`に`default.md`を作成する
```
date = "now()"
draft = true
slug = ""
title = ""
categories = []
```

### configを編集
`<site-name>/config.toml`を環境に合わせて編集する  
（設定方法はテーマのREADME.mdを参照）

### highlight.jsをカスタマイズ
デフォルトで入っていた分ではSwiftが未対応。。。まぁ基本的にはGistを使う予定だけど、一応使えるように

1. [highlightjs公式](https://highlightjs.org/)で使いそうなものだけを選択してカスタムパッケージをDL
2. DLしたものの中から`highlight.pack.js`を`<site-name>/themes/hyde-x/static/js/highlight.pack.js`と丸ごと置き換え
3. カラースタイルもついでにXcodeにしたいので、DLしたものの中から`xcode.css`を`<site-name>/themes/hyde-x/static/css/highlight`に追加
4. `config.toml`の中の`highlight`を`xcode`に変更

これで、無事Swiftもハイライトされるようになった。

### Gist埋め込みコードを設定
普通にリンクをコピペしても良いのだけれども（~~GistBoxを使い出したら逆にハッシュだけコピペするのが面倒だったり~~）、
せっかくMarkdownで書いているのだから、あまりタグを入れて表記が揺らぐのも微妙なので

1. `<site-name>/layouts/shortcodes/gist.html`を作成
2. 1のファイルに
```
<script type="text/javascript" src="https://gist.github.com/{{ .Get 0 }}.js"></script>
```
を貼り付けて保存
3. 使いたい場所で  
```
 {{</* gist gist_sha1_hash */>}}
```  
とすると、
{{< gist 5526bee6ee5efd2fc5a7 >}}
といった感じで埋め込まれる

## 記事の作成
`<site-name>`直下で`hugo new post/<file-name>.md`を実行する

プレビューは`hugo server -t Hyde-X -D -w`を実行した後に、http://localhost:1313/ へアクセス

## 公開手順
### 流れ
1. `hugo -t Hyde-X`でサイトを生成  
(データ一式がpublicに格納される)
2. 1のデータをGitで`commit`して`push`

ただ、毎回これをやるのは面倒なので、シェルスクリプトにしておく

### デプロイ用スクリプト
{{< gist 3159af7dd05c6278a778 >}}


# GitHubでの書き方
参考リンク
[GitHub専用(公式)](https://help.github.com/articles/github-flavored-markdown/)

# 参考リンク
- [【Hugo】Hosting on GitHub Pages【翻訳】](http://www.kotazi.com/blog/post/2015111301/)
- [Hugoでブログ作成 第一部：Hugoでブログを作る](http://tanksuzuki.com/post/hugo-github-pages-1/)
- [Hugo Shortcode for Embedded Gists](http://blog.cronally.com/embed-gists-with-hugo/)
